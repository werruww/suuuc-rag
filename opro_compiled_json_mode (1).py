# -*- coding: utf-8 -*-
"""OPRO-Compiled-JSON-Mode.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/16Jr2VxzanL7Rug3E8WLE0uciO_wzEy8V
"""





!git clone https://github.com/weaviate/structured-rag.git

# Commented out IPython magic to ensure Python compatibility.
# %cd structured-rag

!pip install -e .

curl -fsSL https://ollama.com/install.sh | sh
nohup ollama serve &
ollama pull llama3:8b
ollama list

!pip install dspy-ai --upgrade

!curl -fsSL https://ollama.com/install.sh | sh

!nohup ollama serve &

!ollama pull llama3.2:1b

!nohup ollama serve &

!ollama list



!pip install dspy-ai

!pip install git+https://github.com/stanfordnlp/dspy.git

# Install dspy-ai
#!pip install dspy-ai

# Connect to Claude
import dspy
import openai

openai.api_key = "sk-foobar"
#CLAUDE_API_KEY = "sk-ant-foobar"

# `ollama run llama3.1`

#gpt4 = dspy.OpenAI(model="gpt-4-1106-preview", max_tokens=4000, model_type="chat")


#claude = dspy.Claude(model="claude-3-opus-20240229", api_key=CLAUDE_API_KEY)

ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

lms = [
    {"name": "GPT-4", "lm": gpt4},
    {"name": "llama3.2:1b", "lm": ollama_llama3}
]

#lms.append({"name": "Claude Opus", "lm": claude})

dspy.settings.configure(lm=ollama_llama3)

connection_prompt = "Please say something interesting about Database Systems intended to impress me with your intelligence."

for lm_dict in lms:
    lm, name = lm_dict["lm"], lm_dict["name"]
    with dspy.context(lm=lm):
        print(f"\033[91mResult for {name}\n")
        print(f"\033[0m{lm(connection_prompt)[0]}\n")

!pip3 install git+https://github.com/stanfordnlp/dspy.git@mm-adapter

import dspy

import dspy
from dspy.ollama import OllamaLocal

# Connect to Claude
import dspy
import openai

openai.api_key = "sk-foobar"
#CLAUDE_API_KEY = "sk-ant-foobar"

# `ollama run llama3.1`

#gpt4 = dspy.OpenAI(model="gpt-4-1106-preview", max_tokens=4000, model_type="chat")


#claude = dspy.Claude(model="claude-3-opus-20240229", api_key=CLAUDE_API_KEY)

ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

lms = [
    {"name": "GPT-4", "lm": gpt4},
    {"name": "llama3.2:1b", "lm": ollama_llama3}
]

#lms.append({"name": "Claude Opus", "lm": claude})

dspy.settings.configure(lm=ollama_llama3)

connection_prompt = "Please say something interesting about Database Systems intended to impress me with your intelligence."

for lm_dict in lms:
    lm, name = lm_dict["lm"], lm_dict["name"]
    with dspy.context(lm=lm):
        print(f"\033[91mResult for {name}\n")
        print(f"\033[0m{lm(connection_prompt)[0]}\n")

# Install dspy-ai
#!pip install dspy-ai

# Connect to Claude
import dspy
import openai

openai.api_key = "sk-foobar"
#CLAUDE_API_KEY = "sk-ant-foobar"

# `ollama run llama3.1`

#gpt4 = dspy.OpenAI(model="gpt-4-1106-preview", max_tokens=4000, model_type="chat")

#claude = dspy.Claude(model="claude-3-opus-20240229", api_key=CLAUDE_API_KEY)

ollama_llama3 = dspy.Ollama(model="llama3")  # Changed from OllamaLocal to Ollama

lms = [
    {"name": "GPT-4", "lm": gpt4},
    {"name": "llama3", "lm": ollama_llama3}
]

#lms.append({"name": "Claude Opus", "lm": claude})

dspy.settings.configure(lm=ollama_llama3)

connection_prompt = "Please say something interesting about Database Systems intended to impress me with your intelligence."

for lm_dict in lms:
    lm, name = lm_dict["lm"], lm_dict["name"]
    with dspy.context(lm=lm):
        print(f"\033[91mResult for {name}\n")
        print(f"\033[0m{lm(connection_prompt)[0]}\n")

import dspy

# Configure Ollama (make sure it's running locally - `ollama serve`)
ollama_llama3 = dspy.OpenAI(
    model="llama3",  # or whatever model you have
    api_base="http://localhost:11434/v1",  # Ollama's API endpoint
    api_key="ollama",  # can be any string, Ollama doesn't require a real key
    model_type="chat"  # or "text" depending on your model
)

dspy.settings.configure(lm=ollama_llama3)

# Test it
response = ollama_llama3("Tell me about database systems")
print(response)

import dspy
import requests

class OllamaPredictor(dspy.Predict):
    def __init__(self, model="llama3"):
        super().__init__()
        self.model = model

    def forward(self, prompt):
        response = requests.post(
            "http://localhost:11434/api/generate",
            json={"model": self.model, "prompt": prompt, "stream": False}
        ).json()
        return [response["response"]]

ollama_lm = OllamaPredictor("llama3")
dspy.settings.configure(lm=ollama_lm)
print(ollama_lm("Explain vector databases."))

!pip install poetry

# Commented out IPython magic to ensure Python compatibility.
# %cd /content/structured-rag
!poetry lock
!poetry install

!pip show dspy-ai

!pip install dspy-ai==2.5.29

dspy.OllamaLocal



# Check if Ollama server is running and reachable
import requests
import time

ollama_url = "http://localhost:11434"

def check_ollama_status(url):
    try:
        response = requests.get(url)
        response.raise_for_status() # Raise an HTTPError for bad responses (4xx or 5xx)
        print("Ollama server is running.")
        return True
    except requests.exceptions.ConnectionError:
        print("Ollama server is not running. Attempting to start...")
        return False
    except requests.exceptions.RequestException as e:
        print(f"An error occurred while checking Ollama status: {e}")
        return False

# Check status and start if necessary
if not check_ollama_status(ollama_url):
    # Attempt to kill any existing Ollama processes (optional, helps avoid conflicts)
    !pkill -f ollama || true
    time.sleep(2) # Give it a moment to stop

    # Start Ollama server in the background using nohup
    # Adding stderr to stdout and redirecting output to a file
    !nohup ollama serve > ollama_server.log 2>&1 &
    print("Ollama server start command issued. Waiting for it to become available...")

    # Wait for Ollama to become available (retry connection for a few seconds)
    max_wait_time = 30 # seconds
    wait_interval = 2 # seconds
    waited_time = 0

    while waited_time < max_wait_time:
        if check_ollama_status(ollama_url):
            break
        time.sleep(wait_interval)
        waited_time += wait_interval
        print(f"Waiting for Ollama server... ({waited_time}/{max_wait_time}s)")
    else:
        print("Timed out waiting for Ollama server. Please check ollama_server.log for details.")
        # Consider exiting or raising an error here if the server is critical

# Ensure the specific model is pulled
# This command will only pull if the model is not already present
!ollama pull llama3.2:1b

# You can optionally list models to confirm
!ollama list

import dspy
import openai

openai.api_key = "sk-foobar"
#CLAUDE_API_KEY = "sk-ant-foobar"

# `ollama run llama3.1`

#gpt4 = dspy.OpenAI(model="gpt-4-1106-preview", max_tokens=4000, model_type="chat")


#claude = dspy.Claude(model="claude-3-opus-20240229", api_key=CLAUDE_API_KEY)

ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

lms = [
    {"name": "llama3.2:1b", "lm": ollama_llama3}
]

#lms.append({"name": "Claude Opus", "lm": claude})

dspy.settings.configure(lm=ollama_llama3)

connection_prompt = "Please say something interesting about Database Systems intended to impress me with your intelligence."

for lm_dict in lms:
    lm, name = lm_dict["lm"], lm_dict["name"]
    with dspy.context(lm=lm):
        print(f"\033[91mResult for {name}\n")
        print(f"\033[0m{lm(connection_prompt)[0]}\n")





# DSPy Program

class GenerateResponse(dspy.Signature):
    """Follow the task_instructions (Input Field) and generate the response (Output Field) according to the output format given by response_format (Input Field). You will be given references from (Task-Specific Input Field).
VERY IMPORTANT!! ONLY OUTPUT JSON AND NOTHING ELSE!! THIS IS EXTEMELY IMPORTANT AND YOUR OUTPUT WILL BE USELESS OTHERWISE! DO NOT START YOUR OUTPUT WITH ```json OR END IT WITH ```! ONLY OUTPUT THE KEYS GIVEN BY THE response_format (Input Field)!!
    """

    task_instructions = dspy.InputField(desc="(Input Field)")
    response_format = dspy.InputField(desc="(Input Field)")
    references = dspy.InputField(desc="Task-Specific Input Field")
    response = dspy.OutputField(desc="(Output Field)")

# GenerateAnswersWithConfidence task

task_instructions = """
Assess the context and answer the question as well as a rating on how certain you are that your answer is correct.
"""
response_format = "JSON: {answer: string, confidence: int (0-5), {answer: string, confidence: int (0-5)}}"

generate_response = dspy.Predict(GenerateResponse)

example = generate_response(
    task_instructions=task_instructions,
    response_format=response_format,
    references="What is the atomic number of oxygen?"
).response

print(example)

# Load Data



import json
import os # Import the os module

# Construct the full path to the file, assuming it's in a 'data' subdirectory
# Check the current working directory first
print(f"Current working directory: {os.getcwd()}")

# Update the filename to point to the data subdirectory
filename = "./data/wiki-answerable-questions.json"

# You might want to add a check to see if the file exists before trying to open it
if not os.path.exists(filename):
    print(f"Error: The file {filename} was not found.")
    print("Please ensure that the 'structured-rag' repository was cloned correctly and the 'data' subdirectory exists with the JSON file inside.")
    # You could also add code here to try a different path or exit

with open(filename, 'r') as json_file:
    json_data = json.load(json_file)

# NEED TO PARSE THESE

data = []
for i in range(len(json_data)):
    # parse into `references` for the `inputField`
    context, question = json_data[i]["abstract"], json_data[i]["answerable_question"]
    references = f"{{'question': '{question}', 'context': '{context}'}}"
    data.append(dspy.Example(
        task_instructions=task_instructions,
        response_format=response_format,
        references=references).with_inputs("task_instructions", "response_format", "references"))

# 56 abstract-question pairs
trainset, devset, testset = data[:40], data[40:45], data[45:] # ~ 70% train | 10% dev | 20% test

print(len(data))

# Print the first data example for confirmation
print(data[0])

# Commented out IPython magic to ensure Python compatibility.
import json
import os # Import the os module

# Check the actual current working directory
print(f"Current working directory: {os.getcwd()}")

# List the contents of the current directory
print("\nContents of current directory:")
!ls

# If 'structured-rag' is listed, change into it and list its contents
if 'structured-rag' in os.listdir():
    print("\nChanging to structured-rag directory and listing contents:")
#     %cd structured-rag
    !ls
    # List the contents of the 'data' subdirectory if it exists
    if 'data' in os.listdir():
        print("\nContents of ./data directory:")
        !ls data
    else:
        print("\n'data' subdirectory not found in structured-rag.")
else:
    print("\n'structured-rag' directory not found in the current directory.")
    print("Please ensure the git clone command ran successfully.")

# --- After verifying the path and file existence, use the correct path ---

# Based on the typical structure, the file should be here
filename = "./data/wiki-answerable-questions.json"

# Add a check to see if the file exists before trying to open it
if not os.path.exists(filename):
    print(f"\nError: The file {filename} was not found after checking directories.")
    print("Please manually verify the file path within the cloned repository.")
    # If the file isn't found, you might need to re-clone or locate the file.
    # You can exit or raise an error here if the file is critical.
    # Example: raise FileNotFoundError(f"Data file not found at {filename}")
else:
    print(f"\nFile found at {filename}. Attempting to open...")
    try:
        with open(filename, 'r') as json_file:
            json_data = json.load(json_file)

        # NEED TO PARSE THESE
        data = []
        for i in range(len(json_data)):
            # parse into `references` for the `inputField`
            context, question = json_data[i]["abstract"], json_data[i]["answerable_question"]
            references = f"{{'question': '{question}', 'context': '{context}'}}"
            data.append(dspy.Example(
                task_instructions=task_instructions,
                response_format=response_format,
                references=references).with_inputs("task_instructions", "response_format", "references"))

        # 56 abstract-question pairs
        trainset, devset, testset = data[:40], data[40:45], data[45:] # ~ 70% train | 10% dev | 20% test

        print(f"\nSuccessfully loaded {len(data)} data points.")

        # Print the first data example for confirmation
        print("First data example:")
        print(data[0])

    except Exception as e:
        print(f"\nAn error occurred while processing the data file: {e}")

import json

filename = "/content/structured-rag/data/wiki-answerable-questions.json"
with open(filename, 'r') as json_file:
    json_data = json.load(json_file)

# NEED TO PARSE THESE

data = []
for i in range(len(json_data)):
    # parse into `references` for the `inputField`
    context, question = json_data[i]["abstract"], json_data[i]["answerable_question"]
    references = f"{{'question': '{question}', 'context': '{context}'}}"
    data.append(dspy.Example(
        task_instructions=task_instructions,
        response_format=response_format,
        references=references).with_inputs("task_instructions", "response_format", "references"))

# 56 abstract-question pairs
trainset, devset, testset = data[:40], data[40:45], data[45:] # ~ 70% train | 10% dev | 20% test

print(len(data))

data[0]

"""# Load JSON Metric"""

import json

def is_valid_json_output(output):
    try:
        parsed = json.loads(output)
        return isinstance(parsed.get("answer"), str) and isinstance(parsed.get("confidence"), int) and 0 <= parsed["confidence"] <= 5
    except json.JSONDecodeError:
        return False

# Could put types here -- would love to test one prompt for all types eventually
def JSON_Metric(gold, pred, trace=None):
    return is_valid_json_output(pred.response)

is_valid_json_output('{"answer": "Blue", "confidence": 3}')

is_valid_json_output("Sure I can help you with that!")

# Evaluate Uncompiled

from dspy.evaluate.evaluate import Evaluate

devset_evaluator = Evaluate(devset=devset, num_threads=1, display_progress=True)

print("Evaluating on devset...")
uncompiled_score = devset_evaluator(generate_response, metric=JSON_Metric)

print(uncompiled_score)

testset_evaluator = Evaluate(devset=testset, num_threads=1, display_progress=True)

print("Evaluating on testset...")
uncompiled_test_score = testset_evaluator(generate_response, metric=JSON_Metric)

print(uncompiled_test_score)

"""https://github.com/stanfordnlp/dspy/tree/main/dspy"""



"""# COPRO"""

from dspy.teleprompt import COPRO

COPRO_teleprompter = COPRO(prompt_model=gpt4,
                          metric=JSON_Metric,
                          breadth=10,
                          depth=2,
                          init_temperature=0.7,
                          verbose=True,
                          track_stats=True)
kwargs = dict(num_threads=1, display_progress=True, display_table=5)

COPRO_compiled_generate_response = COPRO_teleprompter.compile(generate_response, trainset=trainset, eval_kwargs=kwargs)

from dspy.teleprompt import COPRO
from dspy.ollama import OllamaLocal # Ensure OllamaLocal is imported if not already

# Ensure ollama_llama3 is defined (assuming the previous cell defining it has run)
# If not, you would need to define it here:
# ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

COPRO_teleprompter = COPRO(prompt_model=ollama_llama3, # Use the Ollama model here
                          metric=JSON_Metric,
                          breadth=10,
                          depth=2,
                          init_temperature=0.7,
                          verbose=True,
                          track_stats=True)

kwargs = dict(num_threads=1, display_progress=True, display_table=5)

# Make sure generate_response, JSON_Metric, and trainset are defined
# Assuming these were defined in previous cells that ran successfully

COPRO_compiled_generate_response = COPRO_teleprompter.compile(generate_response, trainset=trainset, eval_kwargs=kwargs)

print("COPRO compilation started using ollama_llama3 as prompt_model.")
# The compilation process will take some time and print verbose output if verbose=True

from dspy.evaluate.evaluate import Evaluate

devset_evaluator = Evaluate(devset=devset, num_threads=1, display_progress=True)

print("Evaluating on devset...")
compiled_score = devset_evaluator(COPRO_compiled_generate_response, metric=JSON_Metric)

print(uncompiled_score)

testset_evaluator = Evaluate(devset=testset, num_threads=1, display_progress=True)

print("Evaluating on testset...")
compiled_test_score = testset_evaluator(COPRO_compiled_generate_response, metric=JSON_Metric)

print(uncompiled_test_score)

from dspy.teleprompt import COPRO
from dspy.ollama import OllamaLocal # Ensure OllamaLocal is imported if not already

# Ensure ollama_llama3 is defined (assuming the previous cell defining it has run)
# If not, you would need to define it here:
# ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

COPRO_teleprompter = COPRO(prompt_model=ollama_llama3, # Use the Ollama model here
                          metric=JSON_Metric,
                          breadth=10,
                          depth=2,
                          init_temperature=0.7,
                          verbose=True,
                          track_stats=True)

kwargs = dict(num_threads=1, display_progress=True, display_table=5)

# Make sure generate_response, JSON_Metric, and trainset are defined
# Assuming these were defined in previous cells that ran successfully

print("Compiling the DSPy program with COPRO...")
COPRO_compiled_generate_response = COPRO_teleprompter.compile(generate_response, trainset=trainset, eval_kwargs=kwargs)

print("COPRO compilation started using ollama_llama3 as prompt_model.")
# The compilation process will take some time and print verbose output if verbose=True

COPRO_compiled_generate_response.save("COPRO-Compiled-JSON-Mode.json")

from dspy.teleprompt import COPRO

# Check if gpt4 is defined, as it's used by COPRO
try:
    gpt4
except NameError:
    print("Error: 'gpt4' is not defined. Please ensure the cell defining 'gpt4' is executed.")
    print("It should look something like: gpt4 = dspy.OpenAI(model='gpt-4-1106-preview', ...)")
    # You might want to define a placeholder or exit here if gpt4 is critical
    # For example: gpt4 = None # Or raise an error

# Check if JSON_Metric is defined
try:
    JSON_Metric
except NameError:
    print("Error: 'JSON_Metric' is not defined. Please ensure the cell defining 'JSON_Metric' is executed.")
    # Define a placeholder or exit here if JSON_Metric is critical
    # For example: JSON_Metric = None # Or raise an error

# Check if trainset is defined
try:
    trainset
except NameError:
    print("Error: 'trainset' is not defined. Please ensure the data loading cell defining 'trainset' is executed.")
    # Define a placeholder or exit here if trainset is critical
    # For example: trainset = [] # Or raise an error


# Proceed with COPRO only if prerequisites are met (or handled)
if gpt4 is not None and JSON_Metric is not None and trainset:
    COPRO_teleprompter = COPRO(prompt_model=gpt4,
                              metric=JSON_Metric,
                              breadth=10,
                              depth=2,
                              init_temperature=0.7,
                              verbose=True,
                              track_stats=True)

    kwargs = dict(num_threads=1, display_progress=True, display_table=5)

    # This is the line that defines COPRO_compiled_generate_response
    print("Compiling the DSPy program with COPRO...")
    COPRO_compiled_generate_response = COPRO_teleprompter.compile(generate_response, trainset=trainset, eval_kwargs=kwargs)
    print("Compilation complete.")
else:
    print("Skipping COPRO compilation due to missing prerequisites.")

# Check if COPRO_compiled_generate_response is defined before trying to save
try:
    COPRO_compiled_generate_response
    print("Saving the compiled DSPy program...")
    COPRO_compiled_generate_response.save("COPRO-Compiled-JSON-Mode.json")
    print("Program saved successfully.")
except NameError:
    print("Error: 'COPRO_compiled_generate_response' is still not defined.")
    print("Please ensure the COPRO compilation cell ran without errors.")

import json

with open("COPRO-Compiled-JSON-Mode.json", "r") as file:
    data = json.load(file)

print(json.dumps(data, indent=2))

# Install dspy-ai
#!pip install dspy-ai

# Connect to Claude
import dspy
import openai

openai.api_key = "sk-foobar"
#CLAUDE_API_KEY = "sk-ant-foobar"

# `ollama run llama3.1`

# UNCOMMENT THIS LINE TO DEFINE GPT4
#gpt4 = dspy.OpenAI(model="gpt-4-1106-preview", max_tokens=4000, model_type="chat")


#claude = dspy.Claude(model="claude-3-opus-20240229", api_key=CLAUDE_API_KEY)

ollama_llama3 = dspy.OllamaLocal(model="llama3.2:1b")

lms = [
    {"name": "llama3.2:1b", "lm": ollama_llama3}
]

#lms.append({"name": "Claude Opus", "lm": claude})

dspy.settings.configure(lm=ollama_llama3)

connection_prompt = "Please say something interesting about Database Systems intended to impress me with your intelligence."

for lm_dict in lms:
    lm, name = lm_dict["lm"], lm_dict["name"]
    with dspy.context(lm=lm):
        print(f"\033[91mResult for {name}\n")
        print(f"\033[0m{lm(connection_prompt)[0]}\n")









"""### ÿ¥ÿ∫ÿßŸÑ"""

import json

# ‚úÖ 1. ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ JSON ŸÖŸÜ ÿßŸÑŸÖŸÑŸÅ
filename = "/content/structured-rag/data/wiki-answerable-questions.json"  # ÿ∫ŸäŸëÿ± ÿßŸÑÿßÿ≥ŸÖ ÿ•ŸÜ ŸÉÿßŸÜ ŸÖÿÆÿ™ŸÑŸÅŸãÿß
with open(filename, "r", encoding="utf-8") as f:
    data = json.load(f)

# ‚úÖ 2. ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ ÿ£Ÿà ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÉŸÇÿßÿ¶ŸÖÿ©
titles = [item["answerable_question"] for item in data]
contexts = [item["abstract"] for item in data]

print(f"‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ {len(titles)} ÿπŸÜÿµÿ±.\n")

# üîÅ 3. Ÿàÿ∏ŸäŸÅÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ©
def interactive_search():
    while True:
        query = input("\nüîç ÿßŸÉÿ™ÿ® ÿ¨ÿ≤ÿ°ÿßŸã ŸÖŸÜ ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿ£Ÿà ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿ£Ÿà 'ÿÆÿ±Ÿàÿ¨' ŸÑŸÑÿÆÿ±Ÿàÿ¨): ").strip().lower()
        if query in ["ÿÆÿ±Ÿàÿ¨", "exit", "quit"]:
            print("üëã ŸàÿØÿßÿπÿßŸã!")
            break

        # ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ© ÿ¨ÿ≤ÿ¶ŸäÿßŸã
        matches = [(idx, t) for idx, t in enumerate(titles) if query in t.lower()]
        if not matches:
            print("‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ŸÑŸÑÿ®ÿ≠ÿ´.")
            continue

        # ÿπÿ±ÿ∂ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ©
        print("\nüìù ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ®ÿ≠ÿ´:")
        for idx, title in matches:
            print(f"{idx}: {title}")

        # ÿ∑ŸÑÿ® ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿπŸÜÿµÿ±
        sel = input("\nüî¢ ÿßÿÆÿ™ÿ± ÿ±ŸÇŸÖ ÿßŸÑÿπŸÜÿµÿ± ŸÑÿπÿ±ÿ∂ ÿßŸÑŸÜÿµ (ÿ£Ÿà 'ÿ±ÿ¨Ÿàÿπ'): ").strip().lower()
        if sel in ["ÿ±ÿ¨Ÿàÿπ", "back"]:
            continue

        try:
            idx = int(sel)
            if idx < 0 or idx >= len(contexts):
                print("‚ùå ÿ±ŸÇŸÖ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠.")
                continue
        except ValueError:
            print("‚ùå ÿ•ÿØÿÆÿßŸÑ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠.")
            continue

        # ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ
        print("\nüìå ÿßŸÑŸÜÿµ ÿßŸÑŸÖŸÇÿßÿ®ŸÑ:")
        print(contexts[idx])
        print("\n" + "-"*50)

# ‚úÖ 4. ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸàÿ∏ŸäŸÅÿ©
interactive_search()

interactive_search()

/content/structured-rag/data/wiki-answerable-questions.json









[
    {
      "title": "Explorer 20",
      "abstract": "Explorer 20, also known Ionosphere Explorer-A, IE-A, S-48, TOPSI and Topside Explorer, was a NASA satellite launched as part of Explorer program. Its purpose was two-fold: long-term investigation of the ionosphere from above, and in situ investigation of ion concentrations and temperatures.",
      "answerable_question": "What was the purpose of Explorer 20?",
      "unanswerable_question": "In which year was Explorer 20 launched?"
    },
    {
      "title": "MAP4K3",
      "abstract": "Mitogen-activated protein kinase kinase kinase kinase 3 is a protein that in humans is encoded by the MAP4K3 gene. [5]",
      "answerable_question": "What does MAP4K3 encode in humans?",
      "unanswerable_question": "What are the specific functions of the MAP4K3 protein?"
    },
    {
      "title": "Heggholmen Lighthouse",
      "abstract": "Heggholmen Lighthouse (Norwegian: Heggholmen fyr) is a coastal lighthouse located in the Oslofjord, in the municipality of Oslo, Norway. It was established in 1827, and automated in 1972. The lighthouse was listed as a protected site in 1998.[2][3][4]",
      "answerable_question": "In which year was Heggholmen Lighthouse automated?",
      "unanswerable_question": "How tall is the Heggholmen Lighthouse?"
    },
    {
      "title": "Antonio Nachura",
      "abstract": "Antonio Eduardo Bermejo Nachura (June 13, 1941 ‚Äì March 13, 2022) was a Filipino jurist who was an Associate Justice of the Supreme Court of the Philippines. He took his oath of office as Associate Justice on February 7, 2007, and occupied the position until his mandatory retirement on June 13, 2011. Previously, Nachura had been Solicitor-General of the Philippines at the time his appointment to the Court was announced on January 31, 2007, by then-Philippine President Gloria Macapagal Arroyo.[1]",
      "answerable_question": "When did Antonio Nachura retire from his position as Associate Justice?",
      "unanswerable_question": "What specific cases did Antonio Nachura preside over during his time as Associate Justice?"
    },
    {
      "title": "Roman Gergel",
      "abstract": "Roman Gergel (born 22 February 1988) is a Slovak professional footballer who plays as a forward.",
      "answerable_question": "What position does Roman Gergel play in football?",
      "unanswerable_question": "For which teams has Roman Gergel played throughout his career?"
    },
    {
      "title": "Ragigudda Anjaneya Temple",
      "abstract": "The Ragigudda Sree Prasanna Anjaneyaswamy Temple, commonly referred to as Ragigudda Temple or Ragigudda Anjaneya Temple[1] is a temple dedicated to Lord Hanuman, spread across 5 acres also having a hillock in Jayanagara 9th Block suburb of Bengaluru, Karnataka, India.[2] The temple[3] also houses a Shivalinga along with Lord Rama, Goddess Sita, Lord Lakshmana along with the main deity of Lord Hanuman in the same precinct. The temple is on a hillock. There is a smaller temple dedicated to Lord Ganesha, Navagrahas and the Goddess Rajarajeshwari at the base of the hillock. It also plays host a Thrimurthy Sannidhi to the Hindu holy trinity of Lord Brahma, Lord Vishnu and Lord Shiva on huge engraved rocks at the side of the temple.[2] An image of Lord Hanuman Currently Bengaluru's Namma Metro work is underway a few 100m from the temple with a Yellow Line Metro station planned as well.[4]",
      "answerable_question": "Which deities are housed in the main precinct of the Ragigudda Anjaneya Temple?",
      "unanswerable_question": "When was the Ragigudda Anjaneya Temple built?"
    },
    {
      "title": "Vincenzo Civerchio",
      "abstract": "Vincenzo Civerchio or Civercio (c. 1470 ‚Äì c. 1544) was an Italian painter of the Renaissance, born at Crema, and active also in Brescia, where there are some of his alter-pieces.[1] One of his works is at the National Gallery of Art, Washington D.C., others in the Pinacoteca di Brera, Milan, Italy. He is said to be an imitator of Bernardino Butinone, Bernardino Zenale, and influenced by Vincenzo Foppa.",
      "answerable_question": "Where can some of Vincenzo Civerchio's works be found?",
      "unanswerable_question": "What was Vincenzo Civerchio's most famous painting?"
    },
    {
      "title": "Kanieae",
      "abstract": "Kanieae is a tribe in the plant family Myrtaceae[1] from Oceania and south-East Asia with a main diversity center in Australia.",
      "answerable_question": "Where is the main diversity center of Kanieae?",
      "unanswerable_question": "How many species are included in the Kanieae tribe?"
    },
    {
      "title": "List of named storms (B)",
      "abstract": "Storms are named for historical reasons to avoid confusion when communicating with the public, as more than one storm can exist at a time. Names are drawn in order from predetermined lists. For tropical cyclones, names are assigned when a system has one-, three-, or ten-minute winds of more than 65 km/h (40 mph). Standards, however, vary from basin to basin. For example, some tropical depressions are named in the Western Pacific, while within the Australian and Southern Pacific regions, the naming of tropical cyclones are delayed until they have gale-force winds occurring more than halfway around the storm center.",
      "answerable_question": "At what wind speed are tropical cyclones typically assigned names?",
      "unanswerable_question": "What is the most common letter used for naming storms?"
    },
    {
      "title": "Tagetes minuta",
      "abstract": "Tagetes minuta is a tall upright marigold plant from the genus Tagetes, with small flowers, native to the southern half of South America.[2] Since Spanish colonization, it has been introduced around the world, and has become naturalized in Europe, Asia, Australasia, North America, and Africa.[2] Tagetes minuta has numerous local names that vary by region. In the Andes it is known as Huacatay or Wacatay, and in other regions it is common as chinchilla, chiquilla, chilca, zuico, suico, or anisillo.[3] Other names include muster John Henry,[4] southern marigold,[5] khakibos, stinking roger,[6] wild marigold,[2] and black mint. It is called by the Quechua terms huacatay in Peru[7] or wakataya in Bolivia.[8] It is used as a culinary herb in Peru, Ecuador, and parts of Chile and Bolivia. It is commonly sold in Latin grocery stores in a bottled, paste format as black mint paste.",
      "answerable_question": "Where is Tagetes minuta native to?",
      "unanswerable_question": "What is the average height of a Tagetes minuta plant?"
    },
    {
      "title": "George Spencer (rugby)",
      "abstract": "George Spencer (1878‚Äì1950) was a New Zealand rugby football player who represented New Zealand in both rugby union and rugby league. His brother, John, also was a dual-international.",
      "answerable_question": "In which two rugby codes did George Spencer represent New Zealand?",
      "unanswerable_question": "How many international matches did George Spencer play?"
    },
    {
      "title": "KalPa",
      "abstract": "Kalevan Pallo (KalPa) is a professional ice hockey team which competes in the Finnish Liiga. They play in Kuopio, Finland at the Olvi Areena.",
      "answerable_question": "In which city does KalPa play their home games?",
      "unanswerable_question": "Who is the current captain of KalPa?"
    },
    {
      "title": "Fons van der Stee",
      "abstract": "Alphonsus Petrus Johannes Mathildus Maria \"Fons\" van der Stee (30 July 1928 ‚Äì 9 September 1999) was a Dutch politician of the defunct Catholic People's Party (KVP) and later the Christian Democratic Appeal (CDA) party and economist.[1] Van der Stee applied at the Radboud University Nijmegen in June 1950 majoring in Tax law and obtaining a Bachelor of Laws degree in June 1952 before graduating with a Master of Laws degree on 29 February 1956. Van der Stee worked as a tax advisor in Arnhem from May 1956 until July 1971. Van der Stee served as Chairman of the Catholic People's Party from 30 March 1968 until 14 July 1971. Van der Stee was elected as a Member of the Senate after the Senate election of 1971, taking office on 11 May 1971. After the election of 1971 Van der Stee was appointed as State Secretary for Finance in the Cabinet Biesheuvel I, taking office on 14 July 1971. The Cabinet Biesheuvel I fell just one year later on 19 July 1972 and continued to serve in a demissionary capacity until it was replaced by the caretaker Cabinet Biesheuvel II with Van der Stee continuing as State Secretary for Finance, taking office on 9 August 1972. Van der Stee was elected as a Member of the House of Representatives after the election of 1972, taking office on 12 December 1972 but he was still serving in the cabinet and because of dualism customs in the constitutional convention of Dutch politics he couldn't serve a dual mandate he subsequently resigned as State Secretary for Finance on 12 March 1973. Following the cabinet formation of 1972 Van der Stee was again appointed as State Secretary for Finance in the Cabinet Den Uyl, taking office on 11 May 1973. Van der Stee was appointed as Minister of Agriculture and Fisheries following the resignation of Tiemen Brouwer, taking office on 1 November 1973. The Cabinet Den Uyl fell on 22 March 1977 after four years of tensions in the coalition and continued to serve in a demissionary capacity. After the election of 1977 Van der Stee returned as a Member of the House of Representatives, taking office on 8 June 1977 but again because of the dualism customs in Dutch politics he subsequently resigned as Member of the House of Representatives on 8 September 1977. Following the cabinet formation of 1977 Van der Stee remained Minister of Agriculture and Fisheries and was also appointed as Minister for Netherlands Antilles Affairs in the Cabinet Van Agt‚ÄìWiegel, taking office on 19 December 1977. Van der Stee was appointed as Minister of Finance following the resignation of Frans Andriessen, taking office on 5 March 1980. In December 1980 Van der Stee announced that he wouldn't stand for the election of 1981. Following the cabinet formation of 1981 Van der Stee continued as Minister of Finance in the Cabinet Van Agt II, taking office on 11 September 1981. The Cabinet Van Agt II fell just seven months into its term on 12 May 1982 and continued to serve in a demissionary capacity until it was replaced by the caretaker Cabinet Van Agt III with Van der Stee remaining as Minister of Finance on 29 May 1982. In June 1982 Van der Stee announced his retirement from national politics and that he wouldn't stand for the election of 1982. The Cabinet Van Agt III was replaced by the Cabinet Lubbers I following the cabinet formation of 1982 on 4 November 1982. Van der Stee retired after spending 14 years in national politics and became active in the private sector and public sector and occupied numerous seats as a corporate director and nonprofit director on several boards of directors and supervisory boards (General Bank of the Netherlands, Tulip Computers, Apollo Vredestein and the HMC Westeinde Hospital).",
      "answerable_question": "What was Fons van der Stee's last position in the Dutch government before retiring?",
      "unanswerable_question": "What specific policies did Fons van der Stee implement as Minister of Finance?"
    },
    {
      "title": "Areva (moth)",
      "abstract": "Areva is a genus of moths in the subfamily Arctiinae.",
      "answerable_question": "To which subfamily does the genus Areva belong?",
      "unanswerable_question": "How many species are in the Areva genus?"
    },
    {
      "title": "Amanda Doman",
      "abstract": "Amanda Doman (born 24 October 1977 in Gladstone, Queensland) is a softball player from Australia, who won a silver medal at the 2004 Summer Olympics.[1]",
      "answerable_question": "In which Olympic Games did Amanda Doman win a silver medal?",
      "unanswerable_question": "What position did Amanda Doman play in softball?"
    },
    {
      "title": "Kalpataru (director)",
      "abstract": "Kalpataru (born in 1937 as K Parvez) was an Indian film director best known for several hit movies such as Ghar Dwaar, Khoon Ka Badla Khoon, Ghar Ghar Ki Kahani and Bade Ghar Ki Beti.He was known for his melodramatic family dramas.[1][2] He died at a hospital in Santacruz West on 17 May 2015 at the age of 78. He is survived by his wife and two daughters.[3]",
      "answerable_question": "What type of films was Kalpataru known for directing?",
      "unanswerable_question": "How many films did Kalpataru direct in his career?"
    },
    {
      "title": "Erismatopterus",
      "abstract": "Erismatopterus is an extinct genus of percopsiform fish which lived during the early to middle Eocene epoch and containing the single species Erismatopterus levatus. A report of the genus in sediments of similar age in Washington State have been discredited. Erismatopterus is treated as part of the family Percopsidae, but formerly was the type genus of the extinct family Erismatopteridae. The genus is closely related to Amphiplaga of related lake sediments. Shoaling behavior has been reported from a mass mortality fossil of E. levatus and attributed as a predator-evasion response behavior.",
      "answerable_question": "During which geological epoch did Erismatopterus live?",
      "unanswerable_question": "What was the average size of Erismatopterus levatus?"
    },
    {
      "title": "Ocean Kinetics",
      "abstract": "Ocean Kinetics is a private limited engineering company based in Lerwick, Scotland. The company was established by John Henderson in 1992 to specialise in marine engineering solutions.",
      "answerable_question": "Who founded Ocean Kinetics and in what year?",
      "unanswerable_question": "How many employees does Ocean Kinetics currently have?"
    },
    {
      "title": "Doctor in Clover",
      "abstract": "Doctor in Clover is a British comedy film released in 1966, starring Leslie Phillips. The film is based on the novel of the same title by Richard Gordon. It is the sixth of the seven films in the Doctor series. The film was released in the US as Carnaby, MD. British singer Kiki Dee sang the film's title track.",
      "answerable_question": "Who starred in the film Doctor in Clover?",
      "unanswerable_question": "What was the box office performance of Doctor in Clover?"
    },
    {
      "title": "Ludi Boeken",
      "abstract": "Ludi Boeken (born 1951 in Amsterdam) is a Dutch film producer, director and actor.[1] His daughter, Julia Levy-Boeken, is an actress.",
      "answerable_question": "What is Ludi Boeken's daughter's name and profession?",
      "unanswerable_question": "How many films has Ludi Boeken produced?"
    },
    {
      "title": "Battle of Mansura",
      "abstract": "The Battle of Mansura was fought near Mansura, Louisiana, on May 16, 1864, during the Red River Campaign of the American Civil War. A Union force defeated elements of the Confederate States Army.[1]",
      "answerable_question": "On what date was the Battle of Mansura fought?",
      "unanswerable_question": "How many casualties were there in the Battle of Mansura?"
    },
    {
      "title": "Andrea D'Antonio",
      "abstract": "Andrea D'Antoni (1811 ‚Äì 1868) was an Italian painter of the Neoclassical period. He studied under Giuseppe Patania. One of his pupils was Pietro Volpes.[1] Some of his works are displayed in the Galleria d'Arte Moderna di Sant'Anna in Palermo. He painted a Deposition from the Cross (1852) for the church of Santissima Trinit√†, Petralia Sottana.",
      "answerable_question": "Who was Andrea D'Antonio's teacher?",
      "unanswerable_question": "How many paintings did Andrea D'Antonio create in his lifetime?"
    },
    {
      "title": "NVS-01",
      "abstract": "NVS-01 is the first in the series of second generation navigation satellite and the ninth satellite in the Navigation with Indian Constellation (NavIC), with an alternate name of, IRNSS-1J. It will augment the existing satellite and bolster the capability of the NavIC constellation by adding more robustness and new features.[3] ISRO already launched IRNSS 1A, 1B, 1C, 1D, 1E, 1F, 1G, 1H and 1I. The satellite is intended to replace IRNSS-1G and augment the constellation of geosynchronous navigation satellites after IRNSS-1I.[4]",
      "answerable_question": "Which satellite is NVS-01 intended to replace?",
      "unanswerable_question": "What is the expected lifespan of the NVS-01 satellite?"
    },
    {
      "title": "Meridian Mets",
      "abstract": "The Meridian Mets were a Mississippi State League (1921) and Cotton States League (1922‚Äì1923; 1925‚Äì1929) baseball team based in Meridian, Mississippi, United States. Multiple major leaguers played for the team.[1]",
      "answerable_question": "In which leagues did the Meridian Mets play?",
      "unanswerable_question": "Who was the most famous player to play for the Meridian Mets?"
    },
    {
      "title": "NWA World Women's Tag Team Championship",
      "abstract": "The NWA World Women's Tag Team Championship is a women's professional wrestling tag team championship defended in member promotions of the National Wrestling Alliance (NWA).",
      "answerable_question": "In which organization is the NWA World Women's Tag Team Championship defended?",
      "unanswerable_question": "Who are the current holders of the NWA World Women's Tag Team Championship?"
    },
    {
      "title": "Dusan Benda",
      "abstract": "Dusan Benda is a Slovak professional ice hockey player who played with HC Slovan Bratislava in the Slovak Extraliga.[1]",
      "answerable_question": "Which team did Dusan Benda play for in the Slovak Extraliga?",
      "unanswerable_question": "How many seasons did Dusan Benda play in the Slovak Extraliga?"
    },
    {
      "title": "Thyrocopa alterna",
      "abstract": "Thyrocopa alterna is a moth belonging to the family Xyloryctidae. It was first described by Lord Walsingham in 1907. It is endemic to the Hawaiian islands of Maui and Hawaii. The length of the forewings is 8‚Äì15 mm. Adults are on wing at least from May to November. It is very similar to Thyrocopa abusa, but the male antennae are surrounded by cilia, and the male genitalia are without a dorsal ridge. Individuals from Maui generally are smaller than those from the island of Hawaii.",
      "answerable_question": "On which Hawaiian islands is Thyrocopa alterna endemic?",
      "unanswerable_question": "What is the lifespan of a Thyrocopa alterna moth?"
    },
    {
      "title": "Acantharachne",
      "abstract": "Acantharachne is a genus of African orb-weaver spiders first described by Albert Tullgren in 1910.[2]",
      "answerable_question": "Who first described the Acantharachne genus?",
      "unanswerable_question": "How many species are in the Acantharachne genus?"
    },
    {
      "title": "George Olliver",
      "abstract": "George Olliver is a Canadian music artist. A singer and organist, he was the lead singer for Mandala in the 1960s. He also founded the late 1960s, early 1970s jazz rock group Natural Gas.",
      "answerable_question": "What musical group did George Olliver found in the late 1960s?",
      "unanswerable_question": "How many albums did George Olliver release as a solo artist?"
    },
    {
      "title": "ADCY10",
      "abstract": "Adenylyl cyclase 10 also known as ADCY10 is an enzyme that, in humans, is encoded by the ADCY10 gene.[5]",
      "answerable_question": "What is the full name of the enzyme encoded by the ADCY10 gene?",
      "unanswerable_question": "What is the specific function of the ADCY10 enzyme in the human body?"
    },
    {
      "title": "1989 Turkish Cup final",
      "abstract": "The 1989 Turkish Cup final was a football match played over two legs in June 1989. It was the final and deciding match of the 1988‚Äì89 Turkish Cup. Les Ferdinand scored the winning goal to win Besiktas the cup.[1][2][3][4]",
      "answerable_question": "Who scored the winning goal in the 1989 Turkish Cup final?",
      "unanswerable_question": "What was the final score of the 1989 Turkish Cup final?"
    },
    {
      "title": "Invisible (Alison Moyet song)",
      "abstract": "\"Invisible\" is a song by English singer Alison Moyet, written by Lamont Dozier (of the songwriting team Holland‚ÄìDozier‚ÄìHolland) for her debut album, Alf. Released in November 1984, \"Invisible\" peaked at No. 21 on the UK Singles Chart and became Moyet's highest-charting solo single in the United States, peaking at No. 31 on the Billboard Hot 100. The song reached the top 10 in Ireland and New Zealand, peaking at No. 6 and No. 4, respectively. The single's B-side is the Marvin Gaye song \"Hitch Hike\", which has backing from Darts. In interviews for her 2017 tour, Moyet said she would not be performing the song again. She explained that it was not a slam against the song itself, but that the lyrics and message of the song, written more than 30 years earlier, did not resonate with her any more.[2]",
      "answerable_question": "Who wrote the song \"Invisible\" for Alison Moyet?",
      "unanswerable_question": "What inspired Lamont Dozier to write \"Invisible\"?"
    },
    {
      "title": "Grim Reaper (band)",
      "abstract": "Grim Reaper were a British heavy metal band from the new wave of British heavy metal era. The band was formed in 1979 in Droitwich, England, by guitarist Nick Bowcott,[1] and there have been numerous lineup changes over the years, with frontman Steve Grimmett being the longest running member, from 1982 to 1988, then 2006 until his death in 2022. They are best known for several of their 1980s songs, including the respective title tracks from their first three albums: See You in Hell (1983), Fear No Evil (1985) and Rock You to Hell (1987); each of those songs gained notoriety in the 1990s for appearing on Beavis and Butt-Head.[2] After disbanding in 1988, the band reformed in 2006 around Grimmett, and due to legal issues surrounding the rights to the original band name, they went by Steve Grimmett's Grim Reaper. Two albums under that name ‚Äì Walking in the Shadows (2016) and At the Gates (2019) ‚Äì were released before Grimmett died in 2022, after which the band disbanded again.",
      "answerable_question": "Who was the longest-running member of Grim Reaper?",
      "unanswerable_question": "What was Grim Reaper's highest-charting single?"
    },
    {
      "title": "Rick Adair",
      "abstract": "Michael Richard Adair (born January 19, 1958) is an American former pitching coach for the Baltimore Orioles and a former minor league baseball player. He was succeeded as pitching coach by Bill Castro.",
      "answerable_question": "For which Major League Baseball team was Rick Adair a pitching coach?",
      "unanswerable_question": "How many years did Rick Adair play in the minor leagues?"
    },
    {
      "title": "Karl Jakobs",
      "abstract": "Karl Jakobs is Professor of Particle Physics at the University of Freiburg, Germany.[1] He was the Spokesperson (scientific head) of the ATLAS Collaboration at the Large Hadron Collider at CERN from 2017 to 2021.[2]",
      "answerable_question": "What position did Karl Jakobs hold at the ATLAS Collaboration from 2017 to 2021?",
      "unanswerable_question": "What specific research contributions has Karl Jakobs made in particle physics?"
    },
    {
      "title": "2009 Rexall Edmonton Indy",
      "abstract": "The 2009 Rexall Edmonton Indy was the eleventh round of the 2009 IndyCar Series season, and was held on July 26, 2009 at the 1.973-mile (3.175 km) Rexall Speedway in Edmonton, Alberta, Canada.",
      "answerable_question": "When and where was the 2009 Rexall Edmonton Indy held?",
      "unanswerable_question": "Who won the 2009 Rexall Edmonton Indy?"
    },
    {
      "title": "Kathy Lueders",
      "abstract": "Kathryn Lueders (pronounced \"Leaders\") is an American engineer and business manager. Lueders has led NASA's human spaceflight program as the Associate Administrator of the Human Exploration and Operations (HEO) Mission Directorate.[1][2][3] She became the first woman to head human spaceflight.[4] She was the program manager for NASA's Commercial Crew Program and oversaw the return of human spaceflight capabilities to NASA.[5][6] She currently works at SpaceX as Starbase General Manager.[7]",
      "answerable_question": "What is Kathy Lueders' current job position?",
      "unanswerable_question": "What specific projects did Kathy Lueders work on during her time at NASA?"
    },
    {
      "title": "Nuclear receptor coactivator 3",
      "abstract": "The nuclear receptor coactivator 3 also known as NCOA3 is a protein that, in humans, is encoded by the NCOA3 gene.[5][6] NCOA3 is also frequently called 'amplified in breast 1' (AIB1), steroid receptor coactivator-3 (SRC-3), or thyroid hormone receptor activator molecule 1 (TRAM-1).",
      "answerable_question": "What are some alternative names for the NCOA3 protein?",
      "unanswerable_question": "What is the specific function of the NCOA3 protein in human cells?"
    },
    {
      "title": "List of church buildings in Indonesia",
      "abstract": "These are lists of church buildings in Indonesia, based on: Completion year of the building Region Around 10.5% of Indonesia's total population are Christians, and there are approximately 76,517 churches across Indonesia.[1] This list strictly includes notable church buildings and their historic significance in Indonesian history.",
      "answerable_question": "Approximately how many churches are there in Indonesia?",
      "unanswerable_question": "What is the oldest church building in Indonesia?"
    },
    {
      "title": "Duck Lake, Saskatchewan",
      "abstract": "Duck Lake is a town in the boreal forest of central Saskatchewan, Canada. Its location is 88 km (55 mi) north of Saskatoon and 44 kilometres (27 mi) south of Prince Albert on Highway 11, in the Rural Municipality of Duck Lake No. 463. Immediately to the north of Duck Lake is the south block of the Nisbet Provincial Forest. The First Nations people are Cree and the band government of the Beardy's and Okemasis' Cree Nation is located here. Duck Lake was home to one of the last operating schools in the Canadian Indian residential school system, the St. Michael's Indian Residential School (Duck Lake Indian Residential School), which closed in 1996.",
      "answerable_question": "When did the St. Michael's Indian Residential School in Duck Lake close?",
      "unanswerable_question": "What is the current population of Duck Lake?"
    },
    {
      "title": "Gemini Dream",
      "abstract": "\"Gemini Dream\" is a song written by Justin Hayward and John Lodge that was released by The Moody Blues on their 1981 album Long Distance Voyager and also as the lead single from the album. It reached number 12 on the US Hot 100, as well as number 1 on the Canada RPM Top 100 Singles chart. It ranked as the 28th biggest Canadian hit of 1981.",
      "answerable_question": "Who wrote the song \"Gemini Dream\"?",
      "unanswerable_question": "What inspired the lyrics of \"Gemini Dream\"?"
    },
    {
      "title": "E. S. Johnny Walker",
      "abstract": "E. S. Johnny Walker (June 18, 1911 ‚Äì October 8, 2000) was an American World War II veteran and politician who served two terms in the United States House of Representatives from 1965 to 1969.",
      "answerable_question": "How many terms did E. S. Johnny Walker serve in the United States House of Representatives?",
      "unanswerable_question": "What specific legislation did E. S. Johnny Walker sponsor during his time in Congress?"
    },
    {
      "title": "Wikivoyage",
      "abstract": "Wikivoyage is a free web-based travel guide for travel destinations and travel topics written by volunteer authors. It is a sister project of Wikipedia and supported and hosted by the same non-profit Wikimedia Foundation (WMF). Wikivoyage has been called the \"Wikipedia of travel guides\".[2] The project began when editors at the German and then Italian versions of Wikitravel decided in September 2006 to move their editing activities and then current content to a new site, in accordance with the site copyright license, a procedure known as \"forking\". The resulting site went live as \"Wikivoyage\" on December 10, 2006, and was owned and operated by a German association set up for that purpose, Wikivoyage e.V. (which continues to be its representative association). Content was published under the copyleft license Creative Commons Attribution-ShareAlike. In 2012, after a long history of problems with their existing host,[3] the English-language version community of Wikitravel also decided as a community to fork their project. In a two-way move, the English Wikitravel community re-merged with Wikivoyage under the Wikivoyage brand. In addition, all Wikivoyage language versions moved their operations to be hosted by the Wikimedia Foundation, a non-profit organization hosting several of the world's largest wiki-based communities such as Wikipedia.[4][5] Following agreements by the various communities involved and the Wikimedia Foundation, the site was moved to the WMF servers in December 2012 and the whole of Wikivoyage was officially re-launched as a Wikimedia project on January 15, 2013, the day of the 12th anniversary of Wikipedia's launch.[6]",
      "answerable_question": "When was Wikivoyage officially re-launched as a Wikimedia project?",
      "unanswerable_question": "How many active contributors does Wikivoyage currently have?"
    },
    {
      "title": "Dawson Walker",
      "abstract": "Dawson Walker (14 March 1916 ‚Äì 17 August 1973) was manager of the Scotland national football team in 1958.[1] Walker was left in charge of the players due to the Munich air disaster, in which official manager Matt Busby was seriously injured.[2][3]",
      "answerable_question": "Why did Dawson Walker become manager of the Scotland national football team in 1958?",
      "unanswerable_question": "What was Scotland's win-loss record under Dawson Walker's management?"
    },
    {
      "title": "David Bednar (baseball)",
      "abstract": "David Jeffrey Bednar (born October 10, 1994), nicknamed \"The Renegade\", is an American professional baseball pitcher for the Pittsburgh Pirates of Major League Baseball (MLB). The San Diego Padres selected Bednar in the 35th round of the 2016 MLB draft. He previously played in MLB for the San Diego Padres.",
      "answerable_question": "Which team drafted David Bednar in 2016?",
      "unanswerable_question": "What is David Bednar's career earned run average (ERA)?"
    },
    {
      "title": "Heaven or Vegas",
      "abstract": "Heaven or Vegas was a 1996 movie which was a romantic drama that starred Yasmine Bleeth and Richard Grieco.",
      "answerable_question": "Who were the stars of the 1996 movie Heaven or Vegas?",
      "unanswerable_question": "What was the box office performance of Heaven or Vegas?"
    },
    {
      "title": "W. H. Diddle",
      "abstract": "Bill Diddel (1882‚ÄìFebruary 25, 1985) was an American amateur golfer and renowned golf course designer. He was born in Indianapolis, Indiana.[1][2][3][4] Diddel designed approximately three hundred golf courses, primarily in the Midwest, beginning with Ulen Country Club in Lebanon, Indiana. Diddel designed the golf course at Northwood Club in Dallas, Texas, which was the site of the U.S. Open in 1952. Diddel was one of the founders and a charter member of the American Society of Golf Course Architects. He was elected president of that body in 1954. Diddel was the recipient of numerous awards and recognitions, including: The Fred Waring Sportsmanship Award. The American Seniors Golf Association Hall of Honor. Indiana Golf Hall of Fame. Sagamore of The Wabash. Honorary Sergeant of Arms of the Tennessee State Senat. Diddel died February 25, 1985, in Zionsville, Indiana.",
      "answerable_question": "How many golf courses did Bill Diddel design approximately?",
      "unanswerable_question": "What was Bill Diddel's most famous golf course design?"
    },
    {
      "title": "UFC 58",
      "abstract": "UFC 58: USA vs. Canada was a mixed martial arts event held by the Ultimate Fighting Championship on March 4, 2006. It was held at the Mandalay Bay Events Center on the Las Vegas Strip in Nevada, and broadcast live on pay-per-view in the United States.",
      "answerable_question": "Where was UFC 58: USA vs. Canada held?",
      "unanswerable_question": "Who won the main event of UFC 58: USA vs. Canada?"
    },
    {
      "title": "Survivor's Quest",
      "abstract": "Survivor's Quest is a novel set in the Star Wars expanded universe, published by Del Rey on February 1, 2004. Written by Timothy Zahn, it is a sequel to Zahn's 1998 Star Wars novel Vision of the Future.",
      "answerable_question": "Who wrote the novel Survivor's Quest?",
      "unanswerable_question": "What is the plot of Survivor's Quest?"
    },
    {
      "title": "Nymphon gracile",
      "abstract": "Nymphon gracile is a species of sea spider first described by William Elford Leach in 1863.[1][2] The species highly resembles other members of the genus Nymphon, and species identification from morphological traits alone is, therefore, a complex task.[3]",
      "answerable_question": "Who first described the species Nymphon gracile?",
      "unanswerable_question": "What is the average lifespan of Nymphon gracile?"
    },
    {
      "title": "Lyncina carneola",
      "abstract": "Lyncina carneola, common name the carnelian cowrie, is a species of sea snail, a cowry, a marine gastropod mollusk in the family Cypraeidae, the cowries.[1]",
      "answerable_question": "What is the common name for Lyncina carneola?",
      "unanswerable_question": "What is the average size of a Lyncina carneola shell?"
    },
    {
      "title": "Swimming at the 2007 World Aquatics Championships ‚Äì Men's 1500 metre freestyle",
      "abstract": "The men's 1500 metre freestyle at the 2007 World Aquatics Championships was held on the morning of 31 March (heats) and the evening of 1 April (final) at Rod Laver Arena in Melbourne, Australia. 50 swimmers were entered in the event, of which 47 swam. The existing records at the start of the event were: World record (WR): 14:34.56, Grant Hackett (Australia), 29 July 2001, Fukuoka, Japan Championship record (CR): same.",
      "answerable_question": "Where was the men's 1500 metre freestyle event held during the 2007 World Aquatics Championships?",
      "unanswerable_question": "Who won the gold medal in the men's 1500 metre freestyle at the 2007 World Aquatics Championships?"
    },
    {
      "title": "Frederick E. Goodrich",
      "abstract": "Frederick Elizur Goodrich (January 15, 1843 ‚Äì January 12, 1925) was an American journalist and political figure who worked for The Boston Post for 54 years.",
      "answerable_question": "How long did Frederick E. Goodrich work for The Boston Post?",
      "unanswerable_question": "What was Frederick E. Goodrich's most notable article during his career at The Boston Post?"
    },
    {
      "title": "Wunderlichioideae",
      "abstract": "The Wunderlichioideae are a subfamily of flowering plants belonging to the family Asteraceae. The subfamily includes eight genera and about 24 species that are concentrated in Brazil (Wunderlichia) and Guyana (Chimantaea, Stenopadus, and Stomatochaeta), with some species in other South America countries (Hyalis and Ianthopappus) and others (Nouelia and Leucomeris) in Southeast Asia and the Himalayas.[1] Distinguishing features of the members of this subfamily are presence of styles with glabrous style branches and a deletion in the rpoB gene. Two tribes, Wunderlicheae and Hyalideae, are recognised.",
      "answerable_question": "How many genera are included in the Wunderlichioideae subfamily?",
      "unanswerable_question": "What is the evolutionary history of the Wunderlichioideae subfamily?"
    },
    {
      "title": "Sword Boys",
      "abstract": "Sword Boys is a street gang in Perth, Western Australia, consisting mostly of Lebanese Australians,[1][2] that has been known to authorities since mid-1990s.[3][4] Gang members have been reported to wear a miniature gold scimitar on a chain around their necks.[5][6] Sword Boys has been responsible for amphetamine and ecstasy distribution in Western Australia,[7] and has also been linked to car rebirthing by Western Sydney gangs, where stolen cars are stripped and reassembled.[2]",
      "answerable_question": "What distinctive item do Sword Boys gang members reportedly wear?",
      "unanswerable_question": "How many active members are currently in the Sword Boys gang?"
    },
    {
      "title": "Kranium",
      "abstract": "Kemar Donaldson popularly known as Kranium, is a Jamaican reggae and dancehall singer known for his 2013 hit single \"Nobody Has To Know\" which gave him international recognition and led him to the Atlantic Records record label.[1]",
      "answerable_question": "What is Kranium's real name?",
      "unanswerable_question": "How many albums has Kranium released throughout his career?"
    }
  ]



"""### ÿ¥ÿ∫ÿßŸÑ Ÿäÿπÿ±ÿ∂ ÿßŸÑÿßÿ≥ÿ°ŸÑÿ© ÿßŸà ÿßŸÑÿπŸÜÿßŸàŸäŸÜ ŸÅ ÿßŸÑÿØÿßÿ™ÿß ŸÑÿ™ÿÆÿ™ÿßÿ± ŸÖŸÜŸáÿß"""

import json
import os

# ‚ú® ŸÇŸÖ ÿ®ÿ™ÿπÿØŸäŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÑŸÅ ŸáŸÜÿß ÿ•ÿ∞ÿß ÿ£ÿ±ÿØÿ™ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÖŸÑŸÅ ŸÖÿÆÿ™ŸÑŸÅ
FILENAME = "/content/structured-rag/data/wiki-answerable-questions.json"

if not os.path.exists(FILENAME):
    raise FileNotFoundError(f"‚ùå ÿßŸÑŸÖŸÑŸÅ '{FILENAME}' ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑÿ≠ÿßŸÑŸä.")

# 1. ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ JSON
with open(FILENAME, "r", encoding="utf-8") as f:
    data = json.load(f)

# 2. ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ (ÿ£ÿ≥ÿ¶ŸÑÿ©) ŸàÿßŸÑŸÜÿµŸàÿµ (contexts)
titles = []
contexts = []
for item in data:
    # ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿ≠ÿ≥ÿ® ŸáŸäŸÉŸÑ ŸÖŸÑŸÅŸÉ
    title = item.get("answerable_question") or item.get("question") or "<ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ>"
    context = item.get("abstract") or item.get("context") or ""
    titles.append(title)
    contexts.append(context)

print(f"‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ {len(titles)} ÿπŸÜŸàÿßŸÜŸãÿß ŸÖŸÜ ÿßŸÑŸÖŸÑŸÅ.\n")

# 3. ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸàÿßŸÑÿ™ŸÅÿßÿπŸÑ
def interactive_display():
    while True:
        print("\nüìö Ÿáÿ∞Ÿá ÿ®ÿπÿ∂ ÿßŸÑÿπŸÜÿßŸàŸäŸÜ (ÿßŸÑÿ£ŸàŸÑ 20):")
        for i, t in enumerate(titles[:20]):
            print(f"{i}: {t}")
        print("...")

        sel = input("\nüî¢ ÿßÿÆÿ™ÿ± ÿ±ŸÇŸÖ ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿ£Ÿà 'ÿßÿ≥ÿ™ÿπÿ±ÿßÿ∂' ŸÑŸÑÿ®ÿ≠ÿ´ ÿ®ÿßŸÑŸÉŸÑŸÖÿ©ÿå ÿ£Ÿà 'ÿÆÿ±Ÿàÿ¨' ŸÑŸÑÿÆÿ±Ÿàÿ¨): ").strip().lower()
        if sel in ["ÿÆÿ±Ÿàÿ¨", "exit", "quit"]:
            print("üëã ÿßŸÜÿ™ŸáŸâ. ÿ•ŸÑŸâ ÿßŸÑŸÑŸÇÿßÿ°.")
            break
        elif sel == "ÿßÿ≥ÿ™ÿπÿ±ÿßÿ∂":
            query = input("üîç ÿßŸÉÿ™ÿ® ŸÉŸÑŸÖÿ© ŸÑŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿπŸÜÿßŸàŸäŸÜ: ").strip().lower()
            matches = [(i, t) for i, t in enumerate(titles) if query in t.lower()]
            if not matches:
                print("‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨.")
                continue
            print("\nüìù ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ®ÿ≠ÿ´:")
            for i, t in matches[:20]:
                print(f"{i}: {t}")
            continue
        else:
            try:
                idx = int(sel)
                if idx < 0 or idx >= len(contexts):
                    print("‚ùå ÿßŸÑÿ±ŸÇŸÖ ÿÆÿßÿ±ÿ¨ ÿßŸÑŸÜÿ∑ÿßŸÇ.")
                    continue
            except:
                print("‚ùå ÿ•ÿØÿÆÿßŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠.")
                continue

            print("\nüìå ÿßŸÑŸÜÿµ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑:")
            print(contexts[idx])
            print("\n" + "-"*60)

# 4. ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸàÿ∏ŸäŸÅÿ©
interactive_display()

"""   "title": "Doctor in Clover",
      "abstract": "Doctor in Clover is a British comedy film released in 1966, starring Leslie Phillips. The film is based on the novel of the same title by Richard Gordon. It is the sixth of the seven films in the Doctor series. The film was released in the US as Carnaby, MD. British singer Kiki Dee sang the film's title track.",
      "answerable_question": "Who starred in the film Doctor in Clover?",
      "unanswerable_question": "What was the box office performance of Doctor in Clover?"
    },
"""